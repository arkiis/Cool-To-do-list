{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Owner\\\\Documents\\\\cool-todo-list\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Owner\\\\Documents\\\\cool-todo-list\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import{NotificationManager}from\"react-notifications\";import{LOGIN_USER,LOGIN_USER_SUCCESS,LOGIN_USER_FAILURE,LOGOUT_USER,SIGNUP_USER,SIGNUP_USER_SUCCESS,SIGNUP_USER_FAILURE,SIGNUP_USER_END,VERIFY_START,VERIFY_SUCCESS,VERIFY_FAIL,CLEAN_UP,DELETE_START,DELETE_FAIL}from\"./type\";/**\r\n * Redux Action to SignIn User with Firebase\r\n */ /**\r\n * Redux Action to signup user in Firebase\r\n */export var signUp=function signUp(data){return(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,getState,_ref2){var getFirebase,getFirestore,firebase,firestore,res,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:getFirebase=_ref2.getFirebase,getFirestore=_ref2.getFirestore;firebase=getFirebase();firestore=getFirestore();dispatch({type:SIGNUP_USER});_context.prev=4;_context.next=7;return firebase.auth().createUserWithEmailAndPassword(data.email,data.password);case 7:res=_context.sent;// Send the verfication email\nuser=firebase.auth().currentUser;_context.next=11;return user.sendEmailVerification();case 11:_context.next=13;return firestore.collection(\"users\").doc(res.user.uid).set({userName:data.userName});case 13:dispatch({type:SIGNUP_USER_SUCCESS});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](4);dispatch({type:SIGNUP_USER_FAILURE,payload:_context.t0.message});case 19:dispatch({type:SIGNUP_USER_END});case 20:case\"end\":return _context.stop();}}},_callee,null,[[4,16]]);}));return function(_x,_x2,_x3){return _ref.apply(this,arguments);};}());};//Login action creator\nexport var signIn=function signIn(data){return(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState,_ref4){var getFirebase,firebase;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:getFirebase=_ref4.getFirebase;firebase=getFirebase();dispatch({type:SIGNUP_USER});_context2.prev=3;_context2.next=6;return firebase.auth().signInWithEmailAndPassword(data.email,data.password);case 6:dispatch({type:SIGNUP_USER_SUCCESS});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](3);dispatch({type:SIGNUP_USER_FAILURE,payload:_context2.t0.message});case 12:dispatch({type:SIGNUP_USER_END});case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[3,9]]);}));return function(_x4,_x5,_x6){return _ref3.apply(this,arguments);};}());};//Logout action creator\nexport var signOut=function signOut(){return(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState,_ref6){var getFirebase,firebase;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:getFirebase=_ref6.getFirebase;firebase=getFirebase();_context3.prev=2;_context3.next=5;return firebase.auth().signOut();case 5:console.log(\"signout fired!\");_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](2);console.log(_context3.t0.message);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[2,8]]);}));return function(_x7,_x8,_x9){return _ref5.apply(this,arguments);};}());};/**\r\n * Verify email action\r\n */export var verifyEmail=function verifyEmail(){return(/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState,_ref8){var getFirebase,firebase,user;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:getFirebase=_ref8.getFirebase;firebase=getFirebase();dispatch({type:VERIFY_START});_context4.prev=3;user=firebase.auth().currentUser;_context4.next=7;return user.sendEmailVerification();case 7:dispatch({type:VERIFY_SUCCESS});_context4.next=13;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](3);dispatch({type:VERIFY_FAIL,payload:_context4.t0.message});case 13:case\"end\":return _context4.stop();}}},_callee4,null,[[3,10]]);}));return function(_x10,_x11,_x12){return _ref7.apply(this,arguments);};}());};//clean up messages\nexport var clean=function clean(){return{type:CLEAN_UP};};//Delete user\nexport var deleteUser=function deleteUser(){return(/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState,_ref10){var getFirebase,getFirestore,firebase,firestore,user,userId;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:getFirebase=_ref10.getFirebase,getFirestore=_ref10.getFirestore;firebase=getFirebase();firestore=getFirestore();user=firebase.auth().currentUser;userId=getState().firebase.auth.uid;dispatch({type:DELETE_START});_context5.prev=6;_context5.next=9;return firestore.collection(\"users\").doc(userId).delete();case 9:_context5.next=14;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](6);dispatch({type:DELETE_FAIL,payload:_context5.t0.message});case 14:case\"end\":return _context5.stop();}}},_callee5,null,[[6,11]]);}));return function(_x13,_x14,_x15){return _ref9.apply(this,arguments);};}());};","map":{"version":3,"sources":["C:/Users/Owner/Documents/cool-todo-list/client/src/store/actions/AuthActions.js"],"names":["NotificationManager","LOGIN_USER","LOGIN_USER_SUCCESS","LOGIN_USER_FAILURE","LOGOUT_USER","SIGNUP_USER","SIGNUP_USER_SUCCESS","SIGNUP_USER_FAILURE","SIGNUP_USER_END","VERIFY_START","VERIFY_SUCCESS","VERIFY_FAIL","CLEAN_UP","DELETE_START","DELETE_FAIL","signUp","data","dispatch","getState","getFirebase","getFirestore","firebase","firestore","type","auth","createUserWithEmailAndPassword","email","password","res","user","currentUser","sendEmailVerification","collection","doc","uid","set","userName","payload","message","signIn","signInWithEmailAndPassword","signOut","console","log","verifyEmail","clean","deleteUser","userId","delete"],"mappings":"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","sourcesContent":["import { NotificationManager } from \"react-notifications\";\r\nimport {\r\n  LOGIN_USER,\r\n  LOGIN_USER_SUCCESS,\r\n  LOGIN_USER_FAILURE,\r\n  LOGOUT_USER,\r\n  SIGNUP_USER,\r\n  SIGNUP_USER_SUCCESS,\r\n  SIGNUP_USER_FAILURE,\r\n  SIGNUP_USER_END,\r\n  VERIFY_START,\r\n  VERIFY_SUCCESS,\r\n  VERIFY_FAIL,\r\n  CLEAN_UP,\r\n  DELETE_START,\r\n  DELETE_FAIL\r\n} from \"./type\";\r\n\r\n/**\r\n * Redux Action to SignIn User with Firebase\r\n */\r\n\r\n/**\r\n * Redux Action to signup user in Firebase\r\n */\r\nexport const signUp = data => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirebase, getFirestore }\r\n) => {\r\n  const firebase = getFirebase();\r\n  const firestore = getFirestore();\r\n  dispatch({ type: SIGNUP_USER });\r\n  try {\r\n    const res = await firebase\r\n      .auth()\r\n      .createUserWithEmailAndPassword(data.email, data.password);\r\n\r\n    // Send the verfication email\r\n    const user = firebase.auth().currentUser;\r\n    await user.sendEmailVerification();\r\n\r\n    await firestore\r\n      .collection(\"users\")\r\n      .doc(res.user.uid)\r\n      .set({\r\n        userName: data.userName\r\n      });\r\n    dispatch({\r\n      type: SIGNUP_USER_SUCCESS\r\n    });\r\n  } catch (err) {\r\n    dispatch({ type: SIGNUP_USER_FAILURE, payload: err.message });\r\n  }\r\n  dispatch({ type: SIGNUP_USER_END });\r\n};\r\n\r\n//Login action creator\r\nexport const signIn = data => async (dispatch, getState, { getFirebase }) => {\r\n  const firebase = getFirebase();\r\n  dispatch({ type: SIGNUP_USER });\r\n  try {\r\n    await firebase.auth().signInWithEmailAndPassword(data.email, data.password);\r\n    dispatch({ type: SIGNUP_USER_SUCCESS });\r\n  } catch (err) {\r\n    dispatch({ type: SIGNUP_USER_FAILURE, payload: err.message });\r\n  }\r\n  dispatch({ type: SIGNUP_USER_END });\r\n};\r\n\r\n//Logout action creator\r\nexport const signOut = () => async (dispatch, getState, { getFirebase }) => {\r\n  const firebase = getFirebase();\r\n  try {\r\n    await firebase.auth().signOut();\r\n    console.log(\"signout fired!\");\r\n  } catch (err) {\r\n    console.log(err.message);\r\n  }\r\n};\r\n\r\n/**\r\n * Verify email action\r\n */\r\nexport const verifyEmail = () => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirebase }\r\n) => {\r\n  const firebase = getFirebase();\r\n  dispatch({ type: VERIFY_START });\r\n  try {\r\n    const user = firebase.auth().currentUser;\r\n    await user.sendEmailVerification();\r\n    dispatch({ type: VERIFY_SUCCESS });\r\n  } catch (err) {\r\n    dispatch({ type: VERIFY_FAIL, payload: err.message });\r\n  }\r\n};\r\n\r\n//clean up messages\r\nexport const clean = () => ({\r\n  type: CLEAN_UP\r\n});\r\n\r\n//Delete user\r\nexport const deleteUser = () => async (\r\n  dispatch,\r\n  getState,\r\n  { getFirebase, getFirestore }\r\n) => {\r\n  const firebase = getFirebase();\r\n  const firestore = getFirestore();\r\n  const user = firebase.auth().currentUser;\r\n  const userId = getState().firebase.auth.uid;\r\n  dispatch({ type: DELETE_START });\r\n  try {\r\n    await firestore\r\n      .collection(\"users\")\r\n      .doc(userId)\r\n      .delete();\r\n  } catch (err) {\r\n    dispatch({ type: DELETE_FAIL, payload: err.message });\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}