{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Owner\\\\Documents\\\\cool-todo-list\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import moment from\"moment\";import{firebase}from\"../firebase\";import{FaRegListAlt,FaRegCalendarAlt}from\"react-icons/fa\";import{useSelectedProjectValue}from\"../context\";import ProjectOverlay from\"./ProjectOverlay\";import TaskDate from\"./TaskDate\";import{connect}from\"react-redux\";var AddTask=function AddTask(_ref){var _ref$showAddTaskMain=_ref.showAddTaskMain,showAddTaskMain=_ref$showAddTaskMain===void 0?true:_ref$showAddTaskMain,_ref$shouldShowMain=_ref.shouldShowMain,shouldShowMain=_ref$shouldShowMain===void 0?false:_ref$shouldShowMain,showQuickAddTask=_ref.showQuickAddTask,setShowQuickAddTask=_ref.setShowQuickAddTask,loggedIn=_ref.loggedIn;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),task=_useState2[0],setTask=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),taskDate=_useState4[0],setTaskDate=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),project=_useState6[0],setProject=_useState6[1];var _useState7=useState(shouldShowMain),_useState8=_slicedToArray(_useState7,2),showMain=_useState8[0],setShowMain=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showProjectOverlay=_useState10[0],setShowProjectOverlay=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showTaskDate=_useState12[0],setShowTaskDate=_useState12[1];var _useSelectedProjectVa=useSelectedProjectValue(),selectedProject=_useSelectedProjectVa.selectedProject;//inspect selectedProject *need to understand better\nvar addTask=function addTask(){var projectId=project||selectedProject;var collatedDate=\"\";if(projectId===\"TODAY\"){collatedDate=moment().format(\"DD/MM/YYYY\");}else if(projectId===\"NEXT_7\"){collatedDate=moment().add(7,\"days\").format(\"DD/MM/YYYY\");}return task&&projectId&&firebase.firestore().collection(\"tasks\").add({archived:false,projectId:projectId,task:task,date:collatedDate||taskDate,userId:loggedIn.uid}).then(function(){setTask(\"\");setProject(\"\");setShowMain(\"\");setShowProjectOverlay(false);});};return React.createElement(\"div\",{className:showQuickAddTask?\"add-task add-task__overlay\":\"add-task\",\"data-testid\":\"add-task-comp\"},showAddTaskMain&&React.createElement(\"div\",{className:\"add-task__shallow\",\"data-testid\":\"show-main-action\",onClick:function onClick(){return setShowMain(!showMain);}},React.createElement(\"span\",{className:\"add-task__plus\"},\"+\"),React.createElement(\"span\",{className:\"add-task__text\"},\"Add Task\")),(showMain||showQuickAddTask)&&React.createElement(\"div\",{className:\"add-task__main\",\"data-testid\":\"add-task-main\"},showQuickAddTask&&React.createElement(React.Fragment,null,React.createElement(\"div\",{\"data-testid\":\"quick-add-task\"},React.createElement(\"h2\",{className:\"header\"},\"Quick Add Task\"),React.createElement(\"span\",{className:\"add-task__cancel-x\",\"data-testid\":\"add-task-quick-cancel\",\"aria-label\":\"Cancel adding task\",onClick:function onClick(){setShowMain(false);setShowProjectOverlay(false);setShowQuickAddTask(false);}},\"X\"))),React.createElement(ProjectOverlay,{setProject:setProject,showProjectOverlay:showProjectOverlay,setShowProjectOverlay:setShowProjectOverlay}),React.createElement(TaskDate,{setTaskDate:setTaskDate,showTaskDate:showTaskDate,setShowTaskDate:setShowTaskDate}),React.createElement(\"input\",{className:\"add-task__content\",\"data-testid\":\"add-task-content\",type:\"text\",\"aria-label\":\"Enter your task\",onChange:function onChange(e){return setTask(e.target.value);}}),React.createElement(\"button\",{type:\"button\",className:\"add-task__submit\",\"data-testid\":\"add-task\",onClick:function onClick(){return showQuickAddTask?addTask()&&setShowQuickAddTask(false):addTask();},onKeyDown:function onKeyDown(){return showQuickAddTask?addTask()&&setShowQuickAddTask(false):addTask();}},\"Add Task\"),!showQuickAddTask&&React.createElement(\"span\",{className:\"add-task__cancel\",\"data-testid\":\"add-task-main-cancel\",onClick:function onClick(){setShowMain(false);setShowProjectOverlay(false);},\"aria-label\":\"Cancel adding a task\"},\"Cancel\"),React.createElement(\"span\",{className:\"add-task__project\",\"data-testid\":\"show-project-overlay\",onClick:function onClick(){return setShowProjectOverlay(!showProjectOverlay);}},React.createElement(FaRegListAlt,null)),React.createElement(\"span\",{className:\"add-task__date\",\"data-testid\":\"show-task-date-overlay\",onClick:function onClick(){return setShowTaskDate(!showTaskDate);}},React.createElement(FaRegCalendarAlt,null))));};var mapStateToProps=function mapStateToProps(_ref2){var firebase=_ref2.firebase;return{loggedIn:firebase.auth};};export default connect(mapStateToProps,null)(AddTask);","map":{"version":3,"sources":["C:/Users/Owner/Documents/cool-todo-list/client/src/components/AddTask.js"],"names":["React","useState","moment","firebase","FaRegListAlt","FaRegCalendarAlt","useSelectedProjectValue","ProjectOverlay","TaskDate","connect","AddTask","showAddTaskMain","shouldShowMain","showQuickAddTask","setShowQuickAddTask","loggedIn","task","setTask","taskDate","setTaskDate","project","setProject","showMain","setShowMain","showProjectOverlay","setShowProjectOverlay","showTaskDate","setShowTaskDate","selectedProject","addTask","projectId","collatedDate","format","add","firestore","collection","archived","date","userId","uid","then","e","target","value","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport moment from \"moment\";\r\nimport { firebase } from \"../firebase\";\r\nimport { FaRegListAlt, FaRegCalendarAlt } from \"react-icons/fa\";\r\nimport { useSelectedProjectValue } from \"../context\";\r\nimport ProjectOverlay from \"./ProjectOverlay\";\r\nimport TaskDate from \"./TaskDate\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst AddTask = ({\r\n  showAddTaskMain = true,\r\n  shouldShowMain = false,\r\n  showQuickAddTask,\r\n  setShowQuickAddTask,\r\n  loggedIn\r\n}) => {\r\n  const [task, setTask] = useState(\"\");\r\n  const [taskDate, setTaskDate] = useState(\"\");\r\n  const [project, setProject] = useState(\"\");\r\n  const [showMain, setShowMain] = useState(shouldShowMain);\r\n  const [showProjectOverlay, setShowProjectOverlay] = useState(false);\r\n  const [showTaskDate, setShowTaskDate] = useState(false);\r\n\r\n  const { selectedProject } = useSelectedProjectValue();\r\n  //inspect selectedProject *need to understand better\r\n\r\n  const addTask = () => {\r\n    const projectId = project || selectedProject;\r\n    let collatedDate = \"\";\r\n\r\n    if (projectId === \"TODAY\") {\r\n      collatedDate = moment().format(\"DD/MM/YYYY\");\r\n    } else if (projectId === \"NEXT_7\") {\r\n      collatedDate = moment()\r\n        .add(7, \"days\")\r\n        .format(\"DD/MM/YYYY\");\r\n    }\r\n\r\n    return (\r\n      task &&\r\n      projectId &&\r\n      firebase\r\n        .firestore()\r\n        .collection(\"tasks\")\r\n        .add({\r\n          archived: false,\r\n          projectId,\r\n          task,\r\n          date: collatedDate || taskDate,\r\n          userId: loggedIn.uid\r\n        })\r\n        .then(() => {\r\n          setTask(\"\");\r\n          setProject(\"\");\r\n          setShowMain(\"\");\r\n          setShowProjectOverlay(false);\r\n        })\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={showQuickAddTask ? \"add-task add-task__overlay\" : \"add-task\"}\r\n      data-testid=\"add-task-comp\"\r\n    >\r\n      {showAddTaskMain && (\r\n        <div\r\n          className=\"add-task__shallow\"\r\n          data-testid=\"show-main-action\"\r\n          onClick={() => setShowMain(!showMain)}\r\n        >\r\n          <span className=\"add-task__plus\">+</span>\r\n          <span className=\"add-task__text\">Add Task</span>\r\n        </div>\r\n      )}\r\n\r\n      {(showMain || showQuickAddTask) && (\r\n        <div className=\"add-task__main\" data-testid=\"add-task-main\">\r\n          {showQuickAddTask && (\r\n            <>\r\n              <div data-testid=\"quick-add-task\">\r\n                <h2 className=\"header\">Quick Add Task</h2>\r\n                <span\r\n                  className=\"add-task__cancel-x\"\r\n                  data-testid=\"add-task-quick-cancel\"\r\n                  aria-label=\"Cancel adding task\"\r\n                  onClick={() => {\r\n                    setShowMain(false);\r\n                    setShowProjectOverlay(false);\r\n                    setShowQuickAddTask(false);\r\n                  }}\r\n                >\r\n                  X\r\n                </span>\r\n              </div>\r\n            </>\r\n          )}\r\n          <ProjectOverlay\r\n            setProject={setProject}\r\n            showProjectOverlay={showProjectOverlay}\r\n            setShowProjectOverlay={setShowProjectOverlay}\r\n          />\r\n          <TaskDate\r\n            setTaskDate={setTaskDate}\r\n            showTaskDate={showTaskDate}\r\n            setShowTaskDate={setShowTaskDate}\r\n          />\r\n          <input\r\n            className=\"add-task__content\"\r\n            data-testid=\"add-task-content\"\r\n            type=\"text\"\r\n            aria-label=\"Enter your task\"\r\n            onChange={e => setTask(e.target.value)}\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"add-task__submit\"\r\n            data-testid=\"add-task\"\r\n            onClick={() =>\r\n              showQuickAddTask\r\n                ? addTask() && setShowQuickAddTask(false)\r\n                : addTask()\r\n            }\r\n            onKeyDown={() =>\r\n              showQuickAddTask\r\n                ? addTask() && setShowQuickAddTask(false)\r\n                : addTask()\r\n            }\r\n          >\r\n            Add Task\r\n          </button>\r\n          {!showQuickAddTask && (\r\n            <span\r\n              className=\"add-task__cancel\"\r\n              data-testid=\"add-task-main-cancel\"\r\n              onClick={() => {\r\n                setShowMain(false);\r\n                setShowProjectOverlay(false);\r\n              }}\r\n              aria-label=\"Cancel adding a task\"\r\n            >\r\n              Cancel\r\n            </span>\r\n          )}\r\n          <span\r\n            className=\"add-task__project\"\r\n            data-testid=\"show-project-overlay\"\r\n            onClick={() => setShowProjectOverlay(!showProjectOverlay)}\r\n          >\r\n            <FaRegListAlt />\r\n          </span>\r\n          <span\r\n            className=\"add-task__date\"\r\n            data-testid=\"show-task-date-overlay\"\r\n            onClick={() => setShowTaskDate(!showTaskDate)}\r\n          >\r\n            <FaRegCalendarAlt />\r\n          </span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ firebase }) => ({\r\n  loggedIn: firebase.auth\r\n});\r\n\r\nexport default connect(mapStateToProps, null)(AddTask);\r\n\r\nAddTask.propTypes = {\r\n  showAddTaskMain: PropTypes.bool,\r\n  shouldShowMain: PropTypes.bool,\r\n  showQuickAddTask: PropTypes.bool,\r\n  setShowQuickAddTask: PropTypes.func\r\n};\r\n"]},"metadata":{},"sourceType":"module"}